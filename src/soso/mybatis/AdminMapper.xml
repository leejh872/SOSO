<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="soso.dao.AdminDao">
	<!-- <select id="get" resultType="soso.entities.Admin">
		SELECT * FROM COMMENT WHERE
		POST_CODE = #{code}
	</select> -->
	<select id="getList" parameterType="string" resultType="soso.entities.Admin">
		SELECT * FROM
		(
		SELECT ROW_NUMBER() OVER (ORDER BY REGDATE ASC) NUM, ADMIN.*
		FROM [ADMIN]
		WHERE EMAIL LIKE '%${param2}%'
		) A WHERE NUM BETWEEN (1+(#{param1}-1)*10) AND #{param1}*10
	</select>
	
	<insert id="insert" parameterType="soso.entities.Admin">

	<selectKey order="BEFORE" keyProperty="code" resultType="String">
		SELECT ISNULL(MAX(CAST(CODE AS INT)), 0)+1 AS CODE FROM [ADMIN]
	</selectKey>
		INSERT INTO [ADMIN](CODE, EMAIL) VALUES(#{code}, #{email});
	</insert>
	<delete id="delete">
		DELETE [ADMIN] WHERE CODE = #{code}
	</delete>
	
</mapper>